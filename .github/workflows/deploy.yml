name: Deploy GitHub Pages

# è§¦å‘æ¡ä»¶ï¼šåœ¨ push åˆ° dev åˆ†æ”¯å
on:
  push:
    branches:
      - main

# ä»»åŠ¡
jobs:
  build-and-deploy:
    # æœåŠ¡å™¨ç¯å¢ƒï¼šæœ€æ–°ç‰ˆ Ubuntu
    runs-on: ubuntu-latest
    steps:
      # æ‹‰å–ä»£ç 
      - name: Checkout ğŸ›ï¸
        uses: actions/checkout@v3
        with:
          # "æœ€è¿‘æ›´æ–°æ—¶é—´"ç­‰ git æ—¥å¿—ç›¸å…³ä¿¡æ¯ï¼Œéœ€è¦æ‹‰å–å…¨éƒ¨æäº¤è®°å½•
          fetch-depth: 0

      # å®‰è£… Node ç¯å¢ƒ
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          # é€‰æ‹©è¦ä½¿ç”¨çš„ node ç‰ˆæœ¬
          node-version: '18'

      # ç”Ÿæˆé™æ€æ–‡ä»¶
      - name: Build ğŸª‚
        run: bash deploy.sh
      
      # éƒ¨ç½²åˆ° GitHub Pages
      - name: Deploy ğŸš€
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          ssh-key: ${{ secrets.DEPLOY_KEY }}
          # éƒ¨ç½²åˆ° gh-pages åˆ†æ”¯
          branch: gh-pages
          # éƒ¨ç½²ç›®å½•ä¸º VuePress çš„é»˜è®¤è¾“å‡ºç›®å½•
          folder: docs/.vuepress/dist